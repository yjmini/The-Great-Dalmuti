#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <windows.h>
#include <time.h>
#include "Header.h"
#define player 4
#define Joker 2

char Class[13][10] = { "달무티", "대주교","시종장","남작부인","수녀원장","기사","재봉사","석공","요리사","양치기","광부","농노", "조커" };//카드 계급

struct user//종합 구조체
{
	char name[30]; //유저 닉네임
	int deck[13]; //유저의 카드 정보 
	char class[4]; //계급,(왕 귀족 평민 농노)
};

void Pay_A_Tribute(struct user* _user) //조공(세금) 함수
{
	int a = 0, b = 0;
	int A = 0, B = 0;
	int i = 0, j = 0;
	
	for (i; i < player; i++) 
		if ((_user + i)->class == "농노") {//현재 농노의 카드 정보를 보여줌
			printf("%s의 카드\n\n", (_user + i)->name);
			for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
				printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + i)->deck[k]);
			printf("\n");
			printf("자신의 카드 중 숫자가 가장 낮은 카드 2장을 왕에게 주세요.(카드 번호를 적으시오, 조커는 예외)\n");
			scanf_s("%d %d", &a, &b);
			break;
		}
	for (j; j < player; j++)
		if ((_user + j)->class == "왕") {//현재 왕의 카드 정보를 보여줌
			printf("%s의 카드\n\n", (_user + j)->name);
			for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
				printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + j)->deck[k]);
			printf("\n");
			printf("자신의 카드 중 쓸모 없는 카드 2장을 농노에게 주세요.(카드 번호를 적으시오, 조커는 예외)\n");
			scanf_s("%d %d", &A, &B);
			break;
		}
	(_user + i)->deck[a - 1]--; (_user + i)->deck[b - 1]--; (_user + i)->deck[A - 1]++; (_user + i)->deck[B - 1]++;
	(_user + j)->deck[A - 1]--; (_user + j)->deck[B - 1]--;	(_user + j)->deck[a - 1]++; (_user + j)->deck[b - 1]++;
	
	printf("조공 받은 카드를 확인하세요.\n\n");

	printf("%s의 카드\n\n", (_user + i)->name);
	for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
		printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + i)->deck[k]);
	printf("\n");

	printf("%s의 카드\n\n", (_user + j)->name);
	for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
		printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + j)->deck[k]);
	printf("\n");

	a = 0, b = 0; A = 0, B = 0; i = 0, j = 0;
	
	for (i; i < player; i++)
		if ((_user + i)->class == "평민") {//현재 평민의 카드 정보를 보여줌
			printf("%s의 카드\n\n", (_user + i)->name);
			for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
				printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + i)->deck[k]);
			printf("\n");
			printf("자신의 카드 중 숫자가 가장 낮은 카드 1장을 상인에게 주세요.(카드 번호를 적으시오, 조커는 예외)\n");
			scanf_s("%d %d", &a, &b);
		}
	
	for (j; j < player; j++)
		if ((_user + i)->class == "귀족") {//현재 귀족의 카드 정보를 보여줌
			printf("%s의 카드\n\n", (_user + i)->name);
			for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
				printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + j)->deck[k]);
			printf("\n");
			printf("자신의 카드 중 쓸모 없는 카드 1장을 소작농에게 주세요.(카드 번호를 적으시오, 조커는 예외)\n");
			scanf_s("%d %d", &A, &B);
		}
	(_user + i)->deck[a - 1]--; (_user + i)->deck[b - 1]--; (_user + i)->deck[A - 1]++; (_user + i)->deck[B - 1]++;
	(_user + j)->deck[A - 1]--; (_user + j)->deck[B - 1]--;	(_user + j)->deck[a - 1]++; (_user + j)->deck[b - 1]++;

	printf("조공 받은 카드를 확인하세요.\n\n");

	printf("%s의 카드\n\n", (_user + i)->name);
	for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
		printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + i)->deck[k]);
	printf("\n");

	printf("%s의 카드\n\n", (_user + j)->name);
	for (int k = 0; k < 13; k++)//분배된 카드 출력, ex) 1.달무티 : 1장
		printf("%d. %s : %d장\n", k + 1, Class[k][10], (_user + j)->deck[k]);
	printf("\n");
}
