#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <windows.h>
#include <time.h>
#include "Header.h"
#define player 4
#define Joker 2

char Class[13][10] = { "달무티", "대주교","시종장","남작부인","수녀원장","기사","재봉사","석공","요리사","양치기","광부","농노","조커" };//카드 계급
enum number_cards { Dal = 1, Arch, Si, Mis, Sister, Knight, Seam, Gong, Cook, Shep, Miner, Nong };
int Total_Card = Dal + Arch + Si + Mis + Sister + Knight + Seam + Gong + Cook + Shep + Miner + Nong + Joker;//80

struct  Card
{
	char Names[10]; //이름 
	int Cards;  //계급(카드 숫자)
	struct Class *class; //카드 패 함수(내가 무슨 카드를 가지고 있는가에 대한 정보)
};

struct Class {
	enum card_ss {//각 계급 카드 개수
		Dal_c = 0, Arch_c = 0, Si_c = 0, Mis_c = 0, Sister_c = 0, Knight_c = 0, Seam_c = 0, Gong_c = 0,
		Cook_c = 0, Shep_c = 0, Miner_c = 0, Nong_c = 0, Joker_c = 0
	}h;
	int Card_s;
} Card_s[13] = { Dal_c, Arch_c, Si_c, Mis_c, Sister_c, Knight_c, Seam_c, Gong_c, Cook_c, Shep_c, Miner_c, Nong_c, Joker_c };

void Card_Deal(struct Card* _Dalmuti) {//카드 분배
	int k = 0;//Dalmuti.class.Card_s[13];
	int *fp[player] = { 0 };//struct card_s의 주소,fp=_Dalmuti[i].class.Card_s의 주소, *fp=Card_s[]의 주소, **fp=Card_s의 변수

	for (int i = 0; i < player; i++) {
		fp[i] = (_Dalmuti+i)->class->Card_s;

		for (int j = 0; j < Total_Card / player; j++) {//카드 분배 시 조건&분배, 각 플레이어 마다 20장씩 분배
			k = rand() % 13 + 1;

			if (k == 1) (*fp[i])++; else if (k == 2) (*(fp[i] + 1))++; else if (k == 3) (*(fp[i] + 2))++; else if (k == 4) (*(fp[i] + 3))++;
			else if (k == 5) (*(fp[i] + 4))++; else if (k == 6) (*(fp[i] + 5))++; else if (k == 7) (*(fp[i] + 6))++;
			else if (k == 8) (*(fp[i] + 7))++; else if (k == 9) (*(fp[i] + 8))++; else if (k == 10) (*(fp[i] + 9))++;
			else if (k == 11) (*(fp[i] + 10))++; else if (k == 12) (*(fp[i] + 11))++; else (*(fp[i] + 12))++;

			if (Dal_c > 1) { j--; continue; }
			if (Arch_c > 2) { j--; continue; }
			if (Si_c > 3) { j--; continue; }
			if (Mis_c > 4) { j--; continue; }
			if (Sister_c > 5) { j--; continue; }
			if (Knight_c > 6) { j--; continue; }
			if (Seam_c > 7) { j--; continue; }
			if (Gong_c > 8) { j--; continue; }
			if (Cook_c > 9) { j--; continue; }
			if (Shep_c > 10) { j--; continue; }
			if (Miner_c > 11) { j--; continue; }
			if (Nong_c > 12) { j--; continue; }
			if (Joker_c > 2) { j--; continue; }
		}
	}
	for (int i = 0; i < player; i++) {
		printf("%s의 카드\n\n", (_Dalmuti + i)->Names);
		for (int j = 0; j < 13; j++)//분배된 카드 출력, ex) 1.달무티 : 1장
			printf("%d. %s : %d장\n", j + 1, Class[j][10], *(fp[i] + j));
		printf("\n");
}
