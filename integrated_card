#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <windows.h>
#include <time.h>

struct user
{
	char name[30]; //32정도?
	int deck[13]; //0-12 몇 장
};

struct card
{
	char Names[30]; //이름 
	int Cards[13]; //번호
};


char* cards[] = { 0, 0, 1, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12 };

char* p1[20] = { 0 };
char* p2[20] = { 0 };
char* p3[20] = { 0 };
char* p4[20] = { 0 };

void share_card(char* src_deck[], char* des_deck[])
{
	for (int i = 0; i < 20; i++) //한 덱에 20장
	{
		while (1)
		{

			int random_value = rand() % 80; //랜덤으로 0~79 생성

			des_deck[i] = *(src_deck + random_value); //포인터 산술연산을 이용하여 랜덤 생성된 인덱스의 카드를 나눠줌

			if (src_deck[random_value] != '-1') //이미 뽑은 카드는 제외하도록 함
			{
				src_deck[random_value] = '-1'; //뽑은 카드는 -1으로 바꿔줌
				break;
			}
		}
	}


}

int distribute_card(struct user* user1, struct user* user2, struct user* user3, struct user* user4)
{
	srand(time(NULL));

	printf("\t\t\t\t\t\t\t\t\t\t카드 배분 결과는 다음과 같습니다.\n\n");

	printf("\t\t\t\t\t\t\t\t\t%s의 카드 : ", user1->name);
	share_card(cards, p1); //카드 뽑기
	for (int i = 0; i < 20; i++) //카드 출력
	{
		printf("%d ", p1[i]);
	}
	printf("\n");

	printf("\n\t\t\t\t\t\t\t\t\t%s의 카드 : ", user2->name);
	share_card(cards, p2);
	for (int i = 0; i < 20; i++)
	{
		printf("%d ", p2[i]);
	}
	printf("\n");

	printf("\n\t\t\t\t\t\t\t\t\t%s의 카드 : ", user3->name);
	share_card(cards, p3);
	for (int i = 0; i < 20; i++)
	{
		printf("%d ", p3[i]);
	}
	printf("\n");

	printf("\n\t\t\t\t\t\t\t\t\t%s의 카드 : ", user4->name);
	share_card(cards, p4);
	for (int i = 0; i < 20; i++)
	{
		printf("%d ", p4[i]);
	}
	printf("\n");

	Sleep(3000);
	system("cls");

	printf("\n\t\t\t\t\t\t\t\t\t\t이제 한 명씩 자신의 카드를 확인하세요.\n");

	return 0;
}

void print_card(struct user* user1, struct user* user2, struct user* user3, struct user* user4)
{
	char input[255] = { 0 };
	for (int i = 0; i < 13; i++)
	{
		user1->deck[i] = 0;
		user2->deck[i] = 0;
		user3->deck[i] = 0;
		user4->deck[i] = 0;
	}
	for (int i = 0; i < 20; i++)
	{
		if (p1[i] == 0)
			user1->deck[0]++;
		else if (p1[i] == 1)
			user1->deck[1]++;
		else if (p1[i] == 2)
			user1->deck[2]++;
		else if (p1[i] == 3)
			user1->deck[3]++;
		else if (p1[i] == 4)
			user1->deck[4]++;
		else if (p1[i] == 5)
			user1->deck[5]++;
		else if (p1[i] == 6)
			user1->deck[6]++;
		else if (p1[i] == 7)
			user1->deck[7]++;
		else if (p1[i] == 8)
			user1->deck[8]++;
		else if (p1[i] == 9)
			user1->deck[9]++;
		else if (p1[i] == 10)
			user1->deck[10]++;
		else if (p1[i] == 11)
			user1->deck[11]++;
		else if (p1[i] == 12)
			user1->deck[12]++;
	}


	printf("\n\t\t\t\t\t\t\t\t\t\t\t<%s의 카드 패>\n", user1->name);
	for (int i = 0; i < 13; i++)
	{
		printf("\n\t\t\t\t\t\t\t\t\t\t\t%d번 카드 : %d장\n", i, user1->deck[i]);	//쓰레기값;;
	}
CHECK1:
	printf("\n\n\n\t\t\t\t\t\t\t\t\t\t카드 패를 확인하셨습니까? (\"확인\"이라고 입력하시오) : ");
	gets_s(input, 255);
	if (strcmp(input, "확인") == 0) {
		system("cls");
	}
	else {
		printf("\t\t\t\t\t\t\t\t\t\t\t다시 입력하세요.\n");
		goto CHECK1;
	}


	for (int i = 0; i < 20; i++)
	{
		if (p2[i] == 0)
			user2->deck[0]++;
		else if (p2[i] == 1)
			user2->deck[1]++;
		else if (p2[i] == 2)
			user2->deck[2]++;
		else if (p2[i] == 3)
			user2->deck[3]++;
		else if (p2[i] == 4)
			user2->deck[4]++;
		else if (p2[i] == 5)
			user2->deck[5]++;
		else if (p2[i] == 6)
			user2->deck[6]++;
		else if (p2[i] == 7)
			user2->deck[7]++;
		else if (p2[i] == 8)
			user2->deck[8]++;
		else if (p2[i] == 9)
			user2->deck[9]++;
		else if (p2[i] == 10)
			user2->deck[10]++;
		else if (p2[i] == 11)
			user2->deck[11]++;
		else if (p2[i] == 12)
			user2->deck[12]++;
	}


	printf("\n\t\t\t\t\t\t\t\t\t\t\t<%s의 카드 패>\n", user2->name);
	for (int i = 0; i < 13; i++)
	{
		printf("\n\t\t\t\t\t\t\t\t\t\t\t%d번 카드 : %d장\n", i, user2->deck[i]);
	}
CHECK2:
	printf("\n\n\n\t\t\t\t\t\t\t\t\t\t카드 패를 확인하셨습니까? (\"확인\"이라고 입력하시오) : ");
	gets_s(input, 255);
	if (strcmp(input, "확인") == 0) {
		system("cls");
	}
	else {
		printf("\t\t\t\t\t\t\t\t\t\t\t다시 입력하세요.\n");
		goto CHECK2;
	}

	for (int i = 0; i < 20; i++)
	{
		if (p3[i] == 0)
			user3->deck[0]++;
		else if (p3[i] == 1)
			user3->deck[1]++;
		else if (p3[i] == 2)
			user3->deck[2]++;
		else if (p3[i] == 3)
			user3->deck[3]++;
		else if (p3[i] == 4)
			user3->deck[4]++;
		else if (p3[i] == 5)
			user3->deck[5]++;
		else if (p3[i] == 6)
			user3->deck[6]++;
		else if (p3[i] == 7)
			user3->deck[7]++;
		else if (p3[i] == 8)
			user3->deck[8]++;
		else if (p3[i] == 9)
			user3->deck[9]++;
		else if (p3[i] == 10)
			user3->deck[10]++;
		else if (p3[i] == 11)
			user3->deck[11]++;
		else if (p3[i] == 12)
			user3->deck[12]++;
	}


	printf("\n\t\t\t\t\t\t\t\t\t\t\t<%s의 카드 패>\n", user3->name);
	for (int i = 0; i < 13; i++)
	{
		printf("\n\t\t\t\t\t\t\t\t\t\t\t%d번 카드 : %d장\n", i, user3->deck[i]);
	}
CHECK3:
	printf("\n\n\n\t\t\t\t\t\t\t\t\t\t카드 패를 확인하셨습니까? (\"확인\"이라고 입력하시오) : ");
	gets_s(input, 255);
	if (strcmp(input, "확인") == 0) {
		system("cls");
	}
	else {
		printf("\t\t\t\t\t\t\t\t\t\t\t다시 입력하세요.\n");
		goto CHECK3;
	}

	for (int i = 0; i < 20; i++)
	{
		if (p4[i] == 0)
			user4->deck[0]++;
		else if (p4[i] == 1)
			user4->deck[1]++;
		else if (p4[i] == 2)
			user4->deck[2]++;
		else if (p4[i] == 3)
			user4->deck[3]++;
		else if (p4[i] == 4)
			user4->deck[4]++;
		else if (p4[i] == 5)
			user4->deck[5]++;
		else if (p4[i] == 6)
			user4->deck[6]++;
		else if (p4[i] == 7)
			user4->deck[7]++;
		else if (p4[i] == 8)
			user4->deck[8]++;
		else if (p4[i] == 9)
			user4->deck[9]++;
		else if (p4[i] == 10)
			user4->deck[10]++;
		else if (p4[i] == 11)
			user4->deck[11]++;
		else if (p4[i] == 12)
			user4->deck[12]++;
	}


	printf("\n\t\t\t\t\t\t\t\t\t\t\t<%s의 카드 패>\n", user4->name);
	for (int i = 0; i < 13; i++)
	{
		printf("\n\t\t\t\t\t\t\t\t\t\t\t%d번 카드 : %d장\n", i, + user4->deck[i]);
	}

CHECK4:
	printf("\n\n\n\t\t\t\t\t\t\t\t\t\t카드 패를 확인하셨습니까? (\"확인\"이라고 입력하시오) : ");
	gets_s(input, 255);
	if (strcmp(input, "확인") == 0) {
		system("cls");
	}
	else {
		printf("\t\t\t\t\t\t\t\t\t\t\t다시 입력하세요.\n");
		goto CHECK4;
	}

}
